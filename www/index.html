<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>SQL Testing Framework</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-GZFJRFSDHX"></script>
    <script src="assets/js/analytics.js"></script>

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="SQL Testing Framework" />
    <meta name="twitter:description" content="Write complex SQL queries with confidence.  A simple tool for analysts inspried by software development best practices." />
    <meta name="twitter:image" content="https://www.sqltestingframework.com/images/open-graph-index.png" />

    <meta property="og:title" content="SQL Testing Framework" />
    <meta property="og:description" content="Write complex SQL queries with confidence.  A simple tool for analysts inspried by software development best practices." />
    <meta property="og:image" content="https://www.sqltestingframework.com/images/open-graph-index.png" />


    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
	</head>
	<body class="is-preload">

		<!-- Sidebar -->
			<section id="sidebar">
				<div class="inner">
					<nav>
            <img class="logo" src="images/logo_transparent.png" />
						<ul>
							<li><a href="#intro">Welcome</a></li>
							<li><a href="#get-started">Get started</a></li>
							<li><a href="#why-you-need-it">Why you need it</a></li>
							<li><a href="#get-to-work">Get to work</a></li>
						</ul>
					</nav>
				</div>
			</section>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Intro -->
					<section id="intro" class="wrapper style1 fullscreen fade-up">
						<div class="inner">
              <section>
                <h1>The Framework for Testing SQL Queries</h1>
                <p>
                  Write complex SQL queries with confidence.<br />
                  A simple tool for analysts inspried by software development best practices.
                </p>
                <ul class="actions">
                  <li><a href="#get-started" class="button scrolly">Learn more</a></li>
                </ul>
              </section>
            </div>
          </section>
          <section id="hero-code-sample" class="wrapper style1 fade-up">
            <div class="inner split style2">
              <section>
                <h2>Write this:</h2>
                <pre>
                  <code>
WITH text AS (
  SELECT 'all staff have a picture' AS value
), actual AS (
  SELECT
    COUNT(*) AS value
  FROM staff
  WHERE picture IS NULL
), expect AS (
  SELECT 0 AS value
)
:evaluate_test;
                  </code>
                </pre>
              </section>
              <section>
                <h2>Get this:</h2>
                <pre>
                  <code>
 actual | expect | did_pass |           text
--------+--------+----------+--------------------------
<span class="failing-test"> 1      | 0      | f        | all staff have a picture</span>
(1 row)
                  </code>
                </pre>
              </section>
            </div>
					</section>

				<!-- get-started -->
					<section id="get-started" class="wrapper style2 spotlights">
						<section>
							<a href="#" class="image"><img src="images/test-sample.png" alt="" data-position="center center" /></a>
							<div class="content">
								<div class="inner">
									<h2>Write tests against your data or query</h2>
                  <p>Follow a simple structure with <code>text</code>, <code>actual</code>, and <code>expect</code> common table expressions to write your tests.  No stored procedures.</p>
									<ul class="actions">
										<li><a href="writing-sql-tests.html" class="button">How to write SQL tests</a></li>
									</ul>
								</div>
							</div>
						</section>
						<section>
							<a href="#" class="image"><img src="images/test-runner.gif" alt="" data-position="top center" /></a>
							<div class="content">
								<div class="inner">
									<h2>Run the tests</h2>
                  <p>Any <code>.sql</code> file in the <code>test/</code> folder is automatically evaluated, so you can organize your tests.</p>
									<ul class="actions">
                    <!--<li><a href="running-sql-tests.html" class="button">How to run SQL tests</a></li>-->
									</ul>
								</div>
							</div>
						</section>
						<section>
							<a href="#" class="image"><img src="images/fireworks.gif" alt="" data-position="25% 25%" /></a>
							<div class="content">
								<div class="inner">
									<h2>Avoid common mistakes</h2>
									<p>You can't always control the quality of the source data.  SQL Testing Framework allows you to automate the checks that you need to make sure your query result is correct.</p>
									<ul class="actions">
										<li></li>
									</ul>
								</div>
							</div>
						</section>
					</section>

				<!-- Two -->
					<section id="why-you-need-it" class="wrapper style3 fade-up">
						<div class="inner">
							<h2>Why you need it</h2>
							<p>When doing analysis on data that you don't control, avoid common sources of error.</p>
							<div class="features">
								<section>
									<span class="icon solid major fa-angry"></span>
                  <h3>Joining on tables with <code>NULL</code> values</h3>
                  <p><code>NULL</code> does not equal <code>NULL</code>.  If you're joining on a field that can be null, joins may not work as expected.</p>
								</section>
								<section>
									<span class="icon solid major fa-bacteria"></span>
									<h3>Duplicate values</h3>
									<p>A common source of error is assuming that field values are unique when they are not.  Joining tables with non-unique values will result in many more rows of ouput than you expected.</p>
								</section>
								<section>
									<span class="icon solid major fa-bug"></span>
									<h3>Inconsistent source data</h3>
                  <p>When humans are entering data, you may get: <br />
                  <code>COMPANY NAME LLC.</code> <br />
                  <code>Company Name LLC.</code> <br />
                  <code>Company Name, LLC.</code> <br />
                  <code>Company Name</code> <br />
                  Testing the source data with an <code>ILIKE</code> will help you find inconsistent data.</p>
								</section>
								<section>
									<span class="icon solid major fa-bomb"></span>
									<h3>Assumtions about allowed values</h3>
									<p>A field with state abbreviations (e.g. OH) should only have 50 possible values, right?  What if it includes abbreviations for Washington D.C.(DC) or the US Marshall islands (MH)?</p>
								</section>
							</div>
						</div>
					</section>

				<!-- Three -->
					<section id="get-to-work" class="wrapper style1 fade-up">
						<div class="inner">
							<h2>Get to work</h2>
							<p>SQL Testing Framework is incredibly simple to get started with.  The only external dependecies are Docker, and your database.</p>
              <pre>
                <code>
git clone git@github.com:markjlorenz/sqltestingframework.git

# write queries in `queries/`
# write your tests in `queries/test/`

export PG_PASSWORD="password"  # password for your user
export PG_PORT="5432"          # port the database server is running on

cd queries/test
./runner.sh
                </code>
              </pre>

              <h2>Or start with the sample code and database</h2>
              <pre>
                <code>
git clone git@github.com:markjlorenz/sqltestingframework.com.git

export PG_PASSWORD="password"
export PG_PORT="5432"

# start the sample database
docker run -it --rm \
  --publish "$PG_PORT":5432 \
  --env POSTGRES_PASSWORD="$PG_PASSWORD" \
postgres

# get the sample database
cd sqltestingframework-com/sample
curl \
  --location \
  --remote-header-name \
  --remote-name \
https://github.com/robconery/dvdrental/raw/master/dvdrental.tar > dvdrental.tar

# load the sample data
docker run -it --rm \
  --env PGPASSWORD="$PG_PASSWORD" \
  --volume "$PWD":/work \
  --workdir /work \
postgres pg_restore \
  -h host.docker.internal \
  -p "$PG_PORT" \
  -U postgres \
  --verbose \
  --dbname postgres \
  ./dvdrental.tar

# run the sample tests
cd test
./runner.sh
                </code>
              </pre>
						</div>
					</section>

					<section id="contributing" class="wrapper style1 fade-up">
						<div class="inner align-center">
							<h2>Contributing</h2>
              <p>This project is still very early, and we'd love to have more contributors. <br />
              View the source on <a href="https://github.com/markjlorenz/sqltestingframework" class="icon brands solid fa-github"> Github</a></p>
            </div>
					</section>

			</div>

		<!-- Footer -->
			<footer id="footer" class="wrapper style1-alt">
				<div class="inner">
					<ul class="menu">
						<li>&copy;2022 Mark J. Lorenz. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
